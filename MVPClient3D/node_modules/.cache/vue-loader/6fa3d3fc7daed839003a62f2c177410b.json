{"remainingRequest":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/src/components/apparatus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/src/components/apparatus.vue","mtime":1608792916969},{"path":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/MVPClient/MVPServer/mvpworkspace/MVPClient3D/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdC5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdhcHBhcmF0dXMnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzZXRJbnRlcnZhbDogbnVsbCwKICAgICAgICAgICAgc2V0dGltZW91dHM6IG51bGwsCiAgICAgICAgICAgIHRoaXNUaW1lczogJycsCiAgICAgICAgICAgIGxpbWl0OiAxLAogICAgICAgICAgICBpY29uTmFtZTogJ2VsLWljb24tcmlnaHQnLAogICAgICAgICAgICBjb2xvckFycmF5OiBbJyMwMDAwRkYnLCAnI0RDMTQzQycsICcjODAwMDgwJywgJyM1RjlFQTAnLCAnI0ZGOEMwMCcsICcjNDhEMUNDJywgJyM2OTY5NjknLCAnIzAwNjQwMCcsICcjOEI0NTEzJywgJyNGRkQ3MDAnXSwKICAgICAgICAgICAgbGVnZW5kQXJyYXk6IFtdLAogICAgICAgICAgICBmb3JtOiB7CiAgICAgICAgICAgICAgICBnZXREYXRhVGltZTogJzAnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBteUNoYXJ0OiAiIiwKICAgICAgICAgICAgb3B0aW9uOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICcnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ3JpZDogewogICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1JScsCiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcyJScsCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnNSUnLAogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogZmFsc2UKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY29sb3I6IFsnIzAwMDBGRicsICcjREMxNDNDJywgJyM4MDAwODAnLCAnIzVGOUVBMCcsICcjRkY4QzAwJywgJyM0OEQxQ0MnLCAnIzY5Njk2OScsICcjMDA2NDAwJywgJyM4QjQ1MTMnLCAnI0ZGRDcwMCddLAogICAgICAgICAgICAgICAgZGF0YVpvb206IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnNpZGUnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgZ3JpZDNEOiB7CiAgICAgICAgICAgICAgICAgICAgdmlld0NvbnRyb2w6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbjogJ29ydGhvZ3JhcGhpYycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeEF4aXMzRDogewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAgICAgICAgICAgYm91bmRhcnlHYXA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IFtdLAogICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7IHNob3c6IHRydWUsIGxpbmVTdHlsZTogeyBjb2xvcjogJyNGRkZGRkYnIH0gfSwKICAgICAgICAgICAgICAgICAgICBheGlzVGljazogeyBzaG93OiBmYWxzZSB9LAogICAgICAgICAgICAgICAgICAgIHNwbGl0TGluZTogeyBzaG93OiBmYWxzZSB9LAogICAgICAgICAgICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiA0NQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB6QXhpczNEOiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZhbHVlJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHlBeGlzM0Q6IFtdLAogICAgICAgICAgICAgICAgc2VyaWVzOiBbXQogICAgICAgICAgICB9LAogICAgICAgICAgICBnbG9iZWxOdW06IDAsCiAgICAgICAgICAgIGZvcm1BcnJheTogW10sCiAgICAgICAgICAgIGNoYXJ0c0FycmF5OiBbXSwKICAgICAgICAgICAgaXNFbnRlcjogZmFsc2UsCiAgICAgICAgICAgIGVjaGFydHNEYXRhWm9vbTogMTAwLAogICAgICAgICAgICBjbGVhckVjaGFydHNJbnRlcnZhbDogbnVsbCwKICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5lY2hhcnRzRGF0YVpvb20gPSBOdW1iZXIobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VjaGFydHNEYXRhWm9vbScpKQogICAgICAgIGlmIChpc05hTih0aGlzLmVjaGFydHNEYXRhWm9vbSkpIHsKICAgICAgICAgICAgdGhpcy5lY2hhcnRzRGF0YVpvb20gPSAzMDAKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZWNoYXJ0c0RhdGFab29tIDwgMTAwKSB7CiAgICAgICAgICAgIHRoaXMuZWNoYXJ0c0RhdGFab29tID0gMTAwCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmVjaGFydHNEYXRhWm9vbSA+IDMwMDApIHsKICAgICAgICAgICAgdGhpcy5lY2hhcnRzRGF0YVpvb20gPSAzMDAwCiAgICAgICAgfQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWNoYXJ0c0RhdGFab29tKQogICAgfSwKICAgIGJlZm9yZU1vdW50KCkgewogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRpc2hvdygpCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXBwYXJhdHVzLWZyb20tY29udGVudCcpWzBdLnN0eWxlLmhlaWdodCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwYXJhdHVzJykuY2xpZW50SGVpZ2h0IC0gNTApICsgJ3B4JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmlkLWNvbnRlbnQnKVswXS5zdHlsZS5oZWlnaHQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGFyYXR1cycpLmNsaWVudEhlaWdodCAtIDUwKSArICdweCc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215Q2hhcnQnKS5zdHlsZS5oZWlnaHQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGFyYXR1cycpLmNsaWVudEhlaWdodCAtIDUwKSArICdweCc7CiAgICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLm15Q2hhcnQucmVzaXplKCkKICAgICAgICB9CiAgICAgICAgdGhpcy5nZXREYXRhU2VjKCk7CiAgICAgICAgdGhpcy5jbGVhckVjaGFydHMoKQogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBmb3JtYXR0ZXJEZWNpbWFscyh2YWwpIHsKICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWwKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWwudG9GaXhlZCg0KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHByb3BzOiB7CiAgICAgICAgcGFnZVNpemU6IEJvb2xlYW4sCiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICBwYWdlU2l6ZShuZXdWYWwsIG9sZFZhbCkgewogICAgICAgICAgICBpZiAobmV3VmFsID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmljb25OYW1lID0gJ2VsLWljb24tYmFjaycKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuaWNvbk5hbWUgPSAnZWwtaWNvbi1yaWdodCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgY2hhbmdlRWNoYXJ0c0RhdGFab29tKHR5cGUpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgICAgICAgaWYgKHR5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgdGhpcy5lY2hhcnRzRGF0YVpvb20gKz0gMTAwCiAgICAgICAgICAgICAgICBpZiAodGhpcy5lY2hhcnRzRGF0YVpvb20gPiAzMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lY2hhcnRzRGF0YVpvb20gPSAzMDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVjaGFydHNEYXRhWm9vbSAtPSAxMDAKICAgICAgICAgICAgICAgIGlmICh0aGlzLmVjaGFydHNEYXRhWm9vbSA8IDEwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZWNoYXJ0c0RhdGFab29tID0gMTAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGEgPSBfdGhpcy5teUNoYXJ0LmdldE9wdGlvbigpOwogICAgICAgICAgICBsZXQgdCA9IGEueEF4aXNbMF0uZGF0YVthLnhBeGlzWzBdLmRhdGEubGVuZ3RoIC0gMV07CiAgICAgICAgICAgIGxldCBsID0gYS54QXhpc1swXS5kYXRhLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGEueEF4aXNbMF0uZGF0YS5sZW5ndGggPCB0aGlzLmVjaGFydHNEYXRhWm9vbSkgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfdGhpcy5lY2hhcnRzRGF0YVpvb20gLSBsOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBhLnhBeGlzWzBdLmRhdGEucHVzaChfdGhpcy5mb3JtYXR0ZXJUaW1lcyh0LCBpKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChhLnhBeGlzWzBdLmRhdGEubGVuZ3RoID4gdGhpcy5lY2hhcnRzRGF0YVpvb20pIHsKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMubXlDaGFydC5zZXRPcHRpb24oYSk7CiAgICAgICAgfSwKICAgICAgICByZXNldEVjaGFydHMoKSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGxldCBvcHRpb25zID0gX3RoaXMubXlDaGFydC5nZXRPcHRpb24oKTsKICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBvcHRpb25zLnlBeGlzKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLnlBeGlzW2ldLnNob3cgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpIGluIG9wdGlvbnMuc2VyaWVzKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zLnNlcmllc1tpXS5saW5lU3R5bGUud2lkdGggPSAyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wdGlvbnMueUF4aXNbMF0uc2hvdyA9IHRydWU7CiAgICAgICAgICAgIG9wdGlvbnMuZGF0YVpvb21bMF0uc3RhcnQgPSAwOwogICAgICAgICAgICBvcHRpb25zLmRhdGFab29tWzBdLmVuZCA9IDEwMDsKICAgICAgICAgICAgX3RoaXMubXlDaGFydC5zZXRPcHRpb24ob3B0aW9ucyk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDngrnlh7tsZWdlbmQgIOaWh+Wtl+aYvuekulnovbTkuI7nur/mnaHliqDnspcKICAgICAgICAgKiAqLwogICAgICAgIHNob3dZQXhpc0FuZFdlaWdodExpbmUocm93KSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIC8vIHJldHVybgogICAgICAgICAgICBsZXQgb3B0aW9ucyA9IF90aGlzLm15Q2hhcnQuZ2V0T3B0aW9uKCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgaW4gb3B0aW9ucy55QXhpcykgewogICAgICAgICAgICAgICAgb3B0aW9ucy55QXhpc1tpXS5zaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy55QXhpc1tpXS5pZCA9PSByb3cuaWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocm93LnNhbWVBcyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueUF4aXNbaV0uc2hvdyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlcmllc1tpXS5saW5lU3R5bGUud2lkdGggPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID0gNAogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID0gMgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayBpbiBvcHRpb25zLnlBeGlzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy55QXhpc1trXS5pZCA9PSByb3cuc2FtZUFzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy55QXhpc1trXS5zaG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID09IDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID0gMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzW2ldLmxpbmVTdHlsZS53aWR0aCA9IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMubXlDaGFydC5zZXRPcHRpb24ob3B0aW9ucyk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDngrnlh7vlnIbngrnmmL7npLrmipjnur8KICAgICAgICAgKiAqLwogICAgICAgIHNob3dMaW5lKHJvdykgewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgICAgICAgIGxldCBvcHRpb25zID0gX3RoaXMubXlDaGFydC5nZXRPcHRpb24oKQogICAgICAgICAgICBmb3IgKGxldCBpIGluIG9wdGlvbnMueUF4aXMpIHsKICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlcmllc1tpXS5pZCA9PSByb3cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zZXJpZXNbaV0ubGluZVN0eWxlLndpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlcmllc1tpXS5saW5lU3R5bGUud2lkdGggPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5teUNoYXJ0LnNldE9wdGlvbihvcHRpb25zKTsKICAgICAgICB9LAoKICAgICAgICAvKioKICAgICAgICAgKiDlrprml7blmagKICAgICAgICAqLwogICAgICAgIGdldERhdGFTZWMoKSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKF90aGlzLnNldEludGVydmFsKTsKICAgICAgICAgICAgX3RoaXMuc2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICBfdGhpcy5nZXRBcHBhcmF0dXNEYXRhKHsKICAgICAgICAgICAgICAgICAgICB0aGlzVGltZXM6IF90aGlzLnRoaXNUaW1lcywKICAgICAgICAgICAgICAgICAgICBsaW1pdDogX3RoaXMubGltaXQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDlhbPpl63lvZPliY3nu4Tku7bnqpflj6MKICAgICAgICAqLwogICAgICAgIGNsb3NlSXRlbShlbGUpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2VuZEVsZU5hbWUnLCBlbGUpOwogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICog5pS+5aSn57yp5bCP5b2T5YmN57uE5Lu256qX5Y+jCiAgICAgICAgKi8KICAgICAgICBoYW5kbGVTaXplKGVsZSkgewogICAgICAgICAgICBpZiAodGhpcy5wYWdlU2l6ZSA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRlbWl0KCdjb250cmxFbGVOYW1lJywgewogICAgICAgICAgICAgICAgZWxlOiBlbGUsCiAgICAgICAgICAgICAgICBzd2l0Y2g6IHRoaXMucGFnZVNpemUKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDliqjmgIHmm7TmlrBFY2hhcnRz55qEb3B0aW9uCiAgICAgICAgKi8KICAgICAgICByZW5kZXJFY2hhcnRzKHJlc3VsdCwgaXNGaXJzdCkgewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICBpZiAoIV90aGlzLm15Q2hhcnQpIHsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBvcHRpb25zID0gX3RoaXMubXlDaGFydC5nZXRPcHRpb24oKTsKICAgICAgICAgICAgbGV0IHVzZVJvbGxEYXRhID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgIGlmICh1c2VSb2xsRGF0YS5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICB1c2VSb2xsRGF0YS5yZXZlcnNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQga2sgaW4gdXNlUm9sbERhdGEpIHsKICAgICAgICAgICAgICAgIC8vIOWIneWni+WMliBYIOi9tOaVsOmHjwogICAgICAgICAgICAgICAgaWYgKGlzRmlyc3QgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX3RoaXMuZWNoYXJ0c0RhdGFab29tOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy54QXhpczNELmRhdGEucHVzaChfdGhpcy5mb3JtYXR0ZXJUaW1lcyh1c2VSb2xsRGF0YVtra10udGltZVRhZywgaSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueEF4aXMzRC5kYXRhLmluZGV4T2YodXNlUm9sbERhdGFba2tdLnRpbWVUYWcpID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy54QXhpczNELmRhdGEucHVzaCh1c2VSb2xsRGF0YVtra10udGltZVRhZykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCByZXN1bHRkYXRhID0gdXNlUm9sbERhdGFba2tdOwogICAgICAgICAgICAgICAgbGV0IHNlcmllc2RhdGEgPSBvcHRpb25zLnNlcmllczsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gc2VyaWVzZGF0YSkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogaW4gcmVzdWx0ZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzZGF0YVtpXS5sYWJlbE5hbWUgPT0gaikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzZGF0YVtpXS5kYXRhLnB1c2gocmVzdWx0ZGF0YVtqXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqICDlm7rlrppY6L205pWw6YeP5LiOc2VyaWVz55qE5pWw6YePCiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueEF4aXMzRC5kYXRhLmxlbmd0aCA+IF90aGlzLmVjaGFydHNEYXRhWm9vbSkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueEF4aXMzRC5kYXRhLnNwbGljZSgwLCAob3B0aW9ucy54QXhpczNELmRhdGEubGVuZ3RoIC0gX3RoaXMuZWNoYXJ0c0RhdGFab29tKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMuc2VyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VyaWVzW2ldLmRhdGEubGVuZ3RoID4gX3RoaXMuZWNoYXJ0c0RhdGFab29tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzW2ldLmRhdGEuc3BsaWNlKDAsIChvcHRpb25zLnNlcmllc1tpXS5kYXRhLmxlbmd0aCAtIF90aGlzLmVjaGFydHNEYXRhWm9vbSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5teUNoYXJ0LnNldE9wdGlvbihvcHRpb25zKTsKCiAgICAgICAgfSwKICAgICAgICBjbGVhckVjaGFydHMoKSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY2xlYXJFY2hhcnRzSW50ZXJ2YWwpCiAgICAgICAgICAgIHRoaXMuY2xlYXJFY2hhcnRzSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgYSA9IHRoaXMubXlDaGFydC5nZXRPcHRpb24oKTsKICAgICAgICAgICAgICAgIHRoaXMubXlDaGFydC5jbGVhcigpOwogICAgICAgICAgICAgICAgdGhpcy5teUNoYXJ0LnNldE9wdGlvbihhKTsKICAgICAgICAgICAgICAgIGEgPSBudWxsOwogICAgICAgICAgICB9LCAxMDAwICogNjAgKiAxNSkKICAgICAgICB9LAogICAgICAgIC8qKgogICAgICAgICAqIOiOt+WPlkVjaGFydHPmlbDmja4KICAgICAgICAqLwogICAgICAgIGFzeW5jIGdldEFwcGFyYXR1c0RhdGEocm93KSB7CiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHVybDogInJlYWx0aW1lIiwKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydF90aW1lOiByb3cudGhpc1RpbWVzLAogICAgICAgICAgICAgICAgICAgIGxpbWl0OiByb3cubGltaXQsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiDliJ3lp4vljJZFY2hhcnRzICBY6L20CiAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0VXNlQ2hhcnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXN1bHQpKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrayBpbiByZXN1bHRVc2VDaGFydHMuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIHJlc3VsdFVzZUNoYXJ0cy5kYXRhW2trXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHRVc2VDaGFydHMuZGF0YVtra11baV0gPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRVc2VDaGFydHMuZGF0YVtra11baV0gPSByZXN1bHRVc2VDaGFydHMuZGF0YVtra11baV0gPT0gbnVsbCA/IDAgOiByZXN1bHRVc2VDaGFydHMuZGF0YVtra11baV0udG9GaXhlZCgyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5nbG9iZWxOdW0gPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJFY2hhcnRzKHJlc3VsdFVzZUNoYXJ0cywgdHJ1ZSkKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJFY2hhcnRzKHJlc3VsdFVzZUNoYXJ0cywgZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF90aGlzLmdsb2JlbE51bSArPSAxOwogICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluaXtumXtAogICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldERhdGFUaW1lOiByZXN1bHQuZGF0YVswXS50aW1lVGFnLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGhpc1RpbWVzID0gcmVzdWx0LmRhdGFbMF0udGltZVRhZzsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdGRhdGEgPSByZXN1bHQuZGF0YVswXQogICAgICAgICAgICAgICAgICAgIC8vIGlucHV05qGG6LWL5YC8CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBfdGhpcy5mb3JtQXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiBpbiByZXN1bHRkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuZm9ybUFycmF5W2ldLmZpZWxkTmFtZSA9PSBqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9ybUFycmF5W2ldLnZhbHMgPSByZXN1bHRkYXRhW2pdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGltaXQgPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmoLzlvI/ljJbml7bpl7QrMXMKICAgICAgICAqLwogICAgICAgIGZvcm1hdHRlclRpbWVzKHRpbWUsIHN1bSkgewogICAgICAgICAgICBsZXQgZGF0ZSA9IHRpbWU7CiAgICAgICAgICAgIGlmICghZGF0ZSkgewogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0ZSA9IGRhdGUuc3Vic3RyaW5nKDAsIDE5KTsKICAgICAgICAgICAgZGF0ZSA9IGRhdGUucmVwbGFjZSgvLS9nLCAnLycpOwogICAgICAgICAgICBsZXQgdGltZXN0YW1wID0gbmV3IERhdGUoZGF0ZSkuZ2V0VGltZSgpOwogICAgICAgICAgICBpZiAoc3VtID09IDApIHsKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IHRpbWVzdGFtcDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IHRpbWVzdGFtcCArPSAoc3VtICogMTAwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSh0aW1lc3RhbXApOwogICAgICAgICAgICB2YXIgZGF0ZXMgPSAoZC5nZXRGdWxsWWVhcigpKSArICItIiArCiAgICAgICAgICAgICAgICAoZC5nZXRNb250aCgpICsgMSA8IDEwID8gJzAnICsgKGQuZ2V0TW9udGgoKSArIDEpIDogZC5nZXRNb250aCgpICsgMSkgKyAiLSIgKwogICAgICAgICAgICAgICAgKGQuZ2V0RGF0ZSgpIDwgMTAgPyAnMCcgKyBkLmdldERhdGUoKSA6IGQuZ2V0RGF0ZSgpKSArICIgIiArCiAgICAgICAgICAgICAgICAoZC5nZXRIb3VycygpIDwgMTAgPyAnMCcgKyBkLmdldEhvdXJzKCkgOiBkLmdldEhvdXJzKCkpICsgIjoiICsKICAgICAgICAgICAgICAgIChkLmdldE1pbnV0ZXMoKSA8IDEwID8gJzAnICsgZC5nZXRNaW51dGVzKCkgOiBkLmdldE1pbnV0ZXMoKSkgKyAiOiIgKwogICAgICAgICAgICAgICAgKGQuZ2V0U2Vjb25kcygpIDwgMTAgPyAnMCcgKyBkLmdldFNlY29uZHMoKSA6IGQuZ2V0U2Vjb25kcygpKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGVzCiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDliJ3lp4vljJZFY2hhcnRz77yM55uR5ZCs54i25a655Zmo5aSn5bCP6Ieq6YCC5bqU5a695bqm44CB6auY5bqmCiAgICAgICAgKi8KICAgICAgICBkcmF3TGluZSgpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgICAgICAgdGhpcy5teUNoYXJ0ID0gdGhpcy4kZWNoYXJ0cy5nZXRJbnN0YW5jZUJ5RG9tKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJteUNoYXJ0IikpOwogICAgICAgICAgICBpZiAodGhpcy5teUNoYXJ0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHRoaXMubXlDaGFydCA9IHRoaXMuJGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlDaGFydCIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLm15Q2hhcnQuZ2V0WnIoKS5vbignbW91c2Vtb3ZlJywgcGFyYW1zID0+IHsKICAgICAgICAgICAgICAgIHZhciBwb2ludEluUGl4ZWwgPSBbcGFyYW1zLm9mZnNldFgsIHBhcmFtcy5vZmZzZXRZXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm15Q2hhcnQuY29udGFpblBpeGVsKCdncmlkJywgcG9pbnRJblBpeGVsKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0VudGVyID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChfdGhpcy5zZXRJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoX3RoaXMuc2V0dGltZW91dHMpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldHRpbWVvdXRzID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0VudGVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvdW50KysKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvdW50ID4gNikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoX3RoaXMuc2V0SW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoX3RoaXMuc2V0dGltZW91dHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0QXBwYXJhdHVzRGF0YSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNUaW1lczogX3RoaXMudGhpc1RpbWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogX3RoaXMubGltaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvdW50ID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDEwMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMubXlDaGFydC5nZXRacigpLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChldikgewogICAgICAgICAgICAgICAgX3RoaXMuaXNFbnRlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoX3RoaXMuc2V0SW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoX3RoaXMuc2V0dGltZW91dHMpOwogICAgICAgICAgICAgICAgX3RoaXMuc2V0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0QXBwYXJhdHVzRGF0YSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNUaW1lczogX3RoaXMudGhpc1RpbWVzLAogICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogX3RoaXMubGltaXQKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIF90aGlzLmNvdW50ID0gMAogICAgICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIHRoaXMubXlDaGFydC5zZXRPcHRpb24odGhpcy5vcHRpb24sIHRydWUpOwoKICAgICAgICAgICAgbGV0IGVsZW1lbnRSZXNpemVEZXRlY3Rvck1ha2VyID0gcmVxdWlyZSgiZWxlbWVudC1yZXNpemUtZGV0ZWN0b3IiKTsvL+W8leWFpeebkeWQrGRvbeWPmOWMlueahOe7hOS7tgogICAgICAgICAgICBsZXQgZXJkID0gZWxlbWVudFJlc2l6ZURldGVjdG9yTWFrZXIoKTsKICAgICAgICAgICAgbGV0IHdvcmxkTWFwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGFyYXR1cycpOwogICAgICAgICAgICBlcmQubGlzdGVuVG8od29ybGRNYXBDb250YWluZXIsIGZ1bmN0aW9uIChlbGVtZW50KSB7ICAvL+aJp+ihjOebkeWQrCAKICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15Q2hhcnQiKS5zdHlsZS53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggKyAncHgnOwogICAgICAgICAgICAgICAgICAgIF90aGlzLm15Q2hhcnQucmVzaXplKCk7IC8v5Y+Y5YyW6YeN5paw5riy5p+T6aW85Zu+CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IGFwcGFyYXR1c0NvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcHBhcmF0dXMtY29udGVudCcpWzBdOwogICAgICAgICAgICAvKioKICAgICAgICAgICAgICog55uR5ZCs5Lu75Yqh5YaF5a655qGG5piv5ZCm57yp5bCPCiAgICAgICAgICAgICAqICovCiAgICAgICAgICAgIGVyZC5saXN0ZW5UbyhhcHBhcmF0dXNDb250ZW50LCBmdW5jdGlvbiAoZWxlbWVudCkgeyAgLy/miafooYznm5HlkKwgCiAgICAgICAgICAgICAgICBfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2FwcGFyYXR1cy1mcm9tLWNvbnRlbnQnKVswXS5zdHlsZS5oZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodCArICdweCc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JpZC1jb250ZW50JylbMF0uc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteUNoYXJ0Jykuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQgKyAncHgnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJteUNoYXJ0Iikuc3R5bGUud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JzsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5teUNoYXJ0LnJlc2l6ZSgpOyAvL+WPmOWMlumHjeaWsOa4suafk+mlvOWbvgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDojrflj5Zpc2hvdyAg5Yid5aeL5YyWRWNoYXJ0c+eahG9wdGlvbueahHlBeGlz5LiOc2VyaWVzCiAgICAgICAgICogKi8KICAgICAgICBhc3luYyBnZXRpc2hvdygpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3QoewogICAgICAgICAgICAgICAgdXJsOiAic3lzLWRlZmluZS9nZXRfaXNob3dfZGVmaW5lIiwKICAgICAgICAgICAgICAgIG1ldGhvZDogImdldCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfdGhpcy5mb3JtQXJyYXkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kYXRhKSk7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmZvcm1BcnJheS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBfdGhpcy5mb3JtQXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmZvcm1BcnJheVtpXS5zaG93SW5DaGFydCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jaGFydHNBcnJheS5wdXNoKF90aGlzLmZvcm1BcnJheVtpXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIF90aGlzLmNoYXJ0c0FycmF5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbi5zZXJpZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXMuY2hhcnRzQXJyYXlbaV0uc2VyaWFsTm8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpcy5jaGFydHNBcnJheVtpXS5kYXRhTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lM0QnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeUF4aXNJbmRleDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogJ25vbmUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc21vb3RoOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbE5hbWU6IF90aGlzLmNoYXJ0c0FycmF5W2ldLmZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVBczogX3RoaXMuY2hhcnRzQXJyYXlbaV0uc2FtZUFzCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb24ueUF4aXMzRC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBfdGhpcy5jaGFydHNBcnJheVtpXS5zZXJpYWxObywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLmNoYXJ0c0FycmF5W2ldLmRhdGFOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdsZWZ0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiBpID09IDAgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlOiBfdGhpcy5jaGFydHNBcnJheVtpXS50b3BMZWZ0ID09IDEgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzTGluZTogeyBzaG93OiB0cnVlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzVGljazogeyBzaG93OiBmYWxzZSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRMaW5lOiB7IHNob3c6IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVMb2NhdGlvbjogX3RoaXMuY2hhcnRzQXJyYXlbaV0udG9wTGVmdCA9PSAxID8gJ3N0YXJ0JyA6ICdlbmQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBfdGhpcy5jaGFydHNBcnJheVtpXS5sb3dlckxpbWl0ID09IG51bGwgPyAnZGF0YU1pbicgOiBfdGhpcy5jaGFydHNBcnJheVtpXS5sb3dlckxpbWl0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBfdGhpcy5jaGFydHNBcnJheVtpXS51cHBlckxpbWl0ID09IG51bGwgPyAnZGF0YU1heCcgOiBfdGhpcy5jaGFydHNBcnJheVtpXS51cHBlckxpbWl0LAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGVnZW5kQXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpcy5jaGFydHNBcnJheVtpXS5kYXRhTmFtZSArICcoJyArIF90aGlzLmNoYXJ0c0FycmF5W2ldLmRhdGFVbml0ICsgJyknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzLmNoYXJ0c0FycmF5W2ldLnNlcmlhbE5vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUFzOiBfdGhpcy5jaGFydHNBcnJheVtpXS5zYW1lQXMKICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpIGluIF90aGlzLm9wdGlvbi55QXhpczNEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogaW4gX3RoaXMub3B0aW9uLnNlcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbi5zZXJpZXNbal0uc2FtZUFzID09IF90aGlzLm9wdGlvbi55QXhpczNEW2ldLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9uLnNlcmllc1tqXS55QXhpc0luZGV4ID0gaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgaW4gX3RoaXMuY29sb3JBcnJheSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqIGluIF90aGlzLmxlZ2VuZEFycmF5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sZWdlbmRBcnJheVtqXS5jb2xvciA9IF90aGlzLmNvbG9yQXJyYXlbal0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZHJhd0xpbmUoKQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["apparatus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"apparatus.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div id=\"apparatus\">\n        <p class=\"page-title\">\n            <span class=\"tool-box\" v-show=\"pageSize == true\">\n                <el-popover placement=\"left\" width=\"480\" trigger=\"hover\">\n                    <span class=\"contrlbtns\">\n                        <el-button type='success' @click=\"resetEcharts\" size=\"mini\">重置视图</el-button>\n                        <el-button type='primary' size=\"mini\" @click=\"changeEchartsDataZoom(0)\">减少显示数据</el-button>\n                        <span class=\"contrlbtnsinput\">当前总共显示{{echartsDataZoom}}秒数据</span>\n                        <el-button type='primary' @click=\"changeEchartsDataZoom(1)\" size=\"mini\">增加显示数据</el-button>\n                    </span>\n                    <i title=\"更多操作\" slot=\"reference\" class=\"el-icon-warning refreshbtn\"></i>\n                </el-popover>\n                <span class=\"legend-item\" v-for=\"(item , $index) in legendArray\" :key=\"$index\">\n                    <span class=\"legend-point\" :style=\"{'background':item.color}\" @click=\"showLine(item.id)\">\n                        <span :style=\"{'background':item.color}\" class=\"legend-point-line\"></span>\n                    </span>\n                    <span class=\"legend-title\" @click=\"showYAxisAndWeightLine(item)\">{{item.name}}</span>\n                </span>\n            </span>\n            <span class=\"close-btn\" style=\"right:20px\" @click=\"handleSize('apparatus')\" title=\"放大/缩小\"><i :class=\"iconName\"></i></span>\n            <span class=\"close-btn\" @click=\"closeItem('apparatus')\"><i class=\"el-icon-circle-close\"></i></span>\n        </p>\n        <div class=\"apparatus-content\">\n            <div class=\"bigScreen\" v-show=\"pageSize == true\">\n                <div id=\"myChart\" :style=\"{ width: '85%', height: '500px',zIndex:'9' }\"></div>\n                <div class=\"apparatus-from-content\">\n                    <div class=\"apparatus-from-content-1\">\n                        <div class=\"top-input\">\n                            <div class=\"form-label-top\">\n                                <p>数据时间</p>\n                                <span class=\"form-label-res\">\n                                    {{form.getDataTime}}\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"from-content\">\n                            <div class=\"form-label\" v-for=\"(item, $index) in formArray\" :key=\"$index\" :label=\"item.dataName + '(' + item.dataUnit + ')'\">\n                                <p>{{item.dataName}} <span v-if=\"item.dataUnit!= null\">({{item.dataUnit}})</span></p>\n                                <span class=\"form-label-res\">\n                                    {{item.vals | formatterDecimals}}\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-show=\"pageSize == false\" class=\"smellScreen\">\n                <div class=\"top-input-1\">\n                    <div class=\"form-label\">\n                        <p>数据时间</p>\n                        <span class=\"form-label-res\" style=\"max-width: 200px;\">\n                            {{form.getDataTime}}\n                        </span>\n                    </div>\n                </div>\n                <div class=\"grid-content\">\n                    <div style=\"width:100%;height:84px\"></div>\n                    <div class=\"form-label\" v-for=\"(item, $index) in formArray\" :key=\"$index\" :label=\"item.dataName + '(' + item.dataUnit + ')'\">\n                        <p>{{item.dataName}} <span v-if=\"item.dataUnit!= null\">({{item.dataUnit}})</span></p>\n                        <span class=\"form-label-res\">\n                            {{item.vals | formatterDecimals}}\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport request from \"@/utils/request.js\";\nexport default {\n    name: 'apparatus',\n    data() {\n        return {\n            setInterval: null,\n            settimeouts: null,\n            thisTimes: '',\n            limit: 1,\n            iconName: 'el-icon-right',\n            colorArray: ['#0000FF', '#DC143C', '#800080', '#5F9EA0', '#FF8C00', '#48D1CC', '#696969', '#006400', '#8B4513', '#FFD700'],\n            legendArray: [],\n            form: {\n                getDataTime: '0',\n            },\n            myChart: \"\",\n            option: {\n                title: {\n                    text: ''\n                },\n                grid: {\n                    left: '5%',\n                    right: '2%',\n                    bottom: '5%',\n                    containLabel: false\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                color: ['#0000FF', '#DC143C', '#800080', '#5F9EA0', '#FF8C00', '#48D1CC', '#696969', '#006400', '#8B4513', '#FFD700'],\n                dataZoom: [\n                    {\n                        type: 'inside',\n                    },\n                ],\n                grid3D: {\n                    viewControl: {\n                        projection: 'orthographic'\n                    }\n                },\n                xAxis3D: {\n                    type: 'category',\n                    boundaryGap: false,\n                    data: [],\n                    axisLine: { show: true, lineStyle: { color: '#FFFFFF' } },\n                    axisTick: { show: false },\n                    splitLine: { show: false },\n                    axisLabel: {\n                        show: false,\n                        rotate: 45\n                    }\n                },\n                zAxis3D: {\n                    type: 'value'\n                },\n                yAxis3D: [],\n                series: []\n            },\n            globelNum: 0,\n            formArray: [],\n            chartsArray: [],\n            isEnter: false,\n            echartsDataZoom: 100,\n            clearEchartsInterval: null,\n            count: 0,\n        }\n    },\n    created() {\n        this.echartsDataZoom = Number(localStorage.getItem('echartsDataZoom'))\n        if (isNaN(this.echartsDataZoom)) {\n            this.echartsDataZoom = 300\n        }\n        if (this.echartsDataZoom < 100) {\n            this.echartsDataZoom = 100\n        }\n        if (this.echartsDataZoom > 3000) {\n            this.echartsDataZoom = 3000\n        }\n        // console.log(this.echartsDataZoom)\n    },\n    beforeMount() {\n    },\n    mounted() {\n        this.getishow()\n        document.getElementsByClassName('apparatus-from-content')[0].style.height = (document.getElementById('apparatus').clientHeight - 50) + 'px';\n        document.getElementsByClassName('grid-content')[0].style.height = (document.getElementById('apparatus').clientHeight - 50) + 'px';\n        document.getElementById('myChart').style.height = (document.getElementById('apparatus').clientHeight - 50) + 'px';\n        let _this = this;\n        window.onresize = function () {\n            _this.myChart.resize()\n        }\n        this.getDataSec();\n        this.clearEcharts()\n    },\n    filters: {\n        formatterDecimals(val) {\n            if (val == null) {\n                return 0\n            } else if (val == 0) {\n                return 0\n            } else if (typeof val == 'string') {\n                return val\n            } else {\n                return val.toFixed(4)\n            }\n        }\n    },\n    props: {\n        pageSize: Boolean,\n    },\n    watch: {\n        pageSize(newVal, oldVal) {\n            if (newVal == false) {\n                this.iconName = 'el-icon-back'\n            } else {\n                this.iconName = 'el-icon-right'\n            }\n        }\n    },\n    methods: {\n        changeEchartsDataZoom(type) {\n            let _this = this;\n            if (type == 1) {\n                this.echartsDataZoom += 100\n                if (this.echartsDataZoom > 3000) {\n                    this.echartsDataZoom = 3000\n                }\n            } else {\n                this.echartsDataZoom -= 100\n                if (this.echartsDataZoom < 100) {\n                    this.echartsDataZoom = 100\n                }\n            }\n            let a = _this.myChart.getOption();\n            let t = a.xAxis[0].data[a.xAxis[0].data.length - 1];\n            let l = a.xAxis[0].data.length;\n            if (a.xAxis[0].data.length < this.echartsDataZoom) {\n                for (let i = 0; i < _this.echartsDataZoom - l; i++) {\n                    a.xAxis[0].data.push(_this.formatterTimes(t, i))\n                }\n            } else if (a.xAxis[0].data.length > this.echartsDataZoom) {\n\n            }\n            _this.myChart.setOption(a);\n        },\n        resetEcharts() {\n            let _this = this;\n            let options = _this.myChart.getOption();\n            for (let i in options.yAxis) {\n                options.yAxis[i].show = false;\n            }\n            for (let i in options.series) {\n                options.series[i].lineStyle.width = 2;\n            }\n            options.yAxis[0].show = true;\n            options.dataZoom[0].start = 0;\n            options.dataZoom[0].end = 100;\n            _this.myChart.setOption(options);\n        },\n        /**\n         * 点击legend  文字显示Y轴与线条加粗\n         * */\n        showYAxisAndWeightLine(row) {\n            let _this = this;\n            // return\n            let options = _this.myChart.getOption();\n            for (let i in options.yAxis) {\n                options.yAxis[i].show = false;\n                if (options.yAxis[i].id == row.id) {\n                    if (row.sameAs == null) {\n                        options.yAxis[i].show = true;\n                        if (options.series[i].lineStyle.width == 2) {\n                            options.series[i].lineStyle.width = 4\n                        } else {\n                            options.series[i].lineStyle.width = 2\n                        }\n                    } else {\n                        for (let k in options.yAxis) {\n                            if (options.yAxis[k].id == row.sameAs) {\n                                options.yAxis[k].show = true;\n                                if (options.series[i].lineStyle.width == 4) {\n                                    options.series[i].lineStyle.width = 2\n                                } else {\n                                    options.series[i].lineStyle.width = 4\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            _this.myChart.setOption(options);\n        },\n        /**\n         * 点击圆点显示折线\n         * */\n        showLine(row) {\n            let _this = this\n            let options = _this.myChart.getOption()\n            for (let i in options.yAxis) {\n                if (options.series[i].id == row) {\n                    if (options.series[i].lineStyle.width == 0) {\n                        options.series[i].lineStyle.width = 2;\n                    } else {\n                        options.series[i].lineStyle.width = 0;\n                    }\n                }\n            }\n            _this.myChart.setOption(options);\n        },\n\n        /**\n         * 定时器\n        */\n        getDataSec() {\n            let _this = this;\n            window.clearInterval(_this.setInterval);\n            _this.setInterval = setInterval(() => {\n                _this.getApparatusData({\n                    thisTimes: _this.thisTimes,\n                    limit: _this.limit\n                })\n            }, 1000)\n        },\n        /**\n         * 关闭当前组件窗口\n        */\n        closeItem(ele) {\n            this.$emit('sendEleName', ele);\n        },\n        /**\n         * 放大缩小当前组件窗口\n        */\n        handleSize(ele) {\n            if (this.pageSize == true) {\n                this.pageSize = false;\n            } else {\n                this.pageSize = true;\n            }\n            this.$emit('contrlEleName', {\n                ele: ele,\n                switch: this.pageSize\n            });\n        },\n        /**\n         * 动态更新Echarts的option\n        */\n        renderEcharts(result, isFirst) {\n            let _this = this;\n            if (!_this.myChart) {\n                return\n            }\n            let options = _this.myChart.getOption();\n            let useRollData = result.data;\n            if (useRollData.length > 1) {\n                useRollData.reverse();\n            }\n            for (let kk in useRollData) {\n                // 初始化 X 轴数量\n                if (isFirst == true) {\n                    for (let i = 0; i < _this.echartsDataZoom; i++) {\n                        options.xAxis3D.data.push(_this.formatterTimes(useRollData[kk].timeTag, i))\n                    }\n                }\n                if (options.xAxis3D.data.indexOf(useRollData[kk].timeTag) == -1) {\n                    options.xAxis3D.data.push(useRollData[kk].timeTag)\n                }\n                let resultdata = useRollData[kk];\n                let seriesdata = options.series;\n                for (let i in seriesdata) {\n                    for (let j in resultdata) {\n                        if (seriesdata[i].labelName == j) {\n                            seriesdata[i].data.push(resultdata[j]);\n                        }\n                    }\n                }\n                /**\n                 *  固定X轴数量与series的数量\n                */\n                if (options.xAxis3D.data.length > _this.echartsDataZoom) {\n                    options.xAxis3D.data.splice(0, (options.xAxis3D.data.length - _this.echartsDataZoom));\n                }\n                for (let i = 0; i < options.series.length; i++) {\n                    if (options.series[i].data.length > _this.echartsDataZoom) {\n                        options.series[i].data.splice(0, (options.series[i].data.length - _this.echartsDataZoom));\n                    }\n                }\n            }\n            _this.myChart.setOption(options);\n\n        },\n        clearEcharts() {\n            let _this = this;\n            window.clearInterval(this.clearEchartsInterval)\n            this.clearEchartsInterval = setInterval(() => {\n                let a = this.myChart.getOption();\n                this.myChart.clear();\n                this.myChart.setOption(a);\n                a = null;\n            }, 1000 * 60 * 15)\n        },\n        /**\n         * 获取Echarts数据\n        */\n        async getApparatusData(row) {\n            let _this = this;\n            let result = await request({\n                url: \"realtime\",\n                method: \"get\",\n                params: {\n                    start_time: row.thisTimes,\n                    limit: row.limit,\n                }\n            });\n            try {\n                /**\n                 * 初始化Echarts  X轴\n                */\n                if (result.data.length > 0) {\n                    let resultUseCharts = JSON.parse(JSON.stringify(result));\n                    for (let kk in resultUseCharts.data) {\n                        for (let i in resultUseCharts.data[kk]) {\n                            if (typeof resultUseCharts.data[kk][i] == 'number') {\n                                resultUseCharts.data[kk][i] = resultUseCharts.data[kk][i] == null ? 0 : resultUseCharts.data[kk][i].toFixed(2)\n                            }\n                        }\n                    }\n                    if (_this.globelNum == 0) {\n                        _this.renderEcharts(resultUseCharts, true)\n                    } else {\n                        _this.renderEcharts(resultUseCharts, false)\n                    }\n                    _this.globelNum += 1;\n                    // 获取时间\n                    _this.form = {\n                        getDataTime: result.data[0].timeTag,\n                    };\n                    _this.thisTimes = result.data[0].timeTag;\n\n                    let resultdata = result.data[0]\n                    // input框赋值\n                    for (let i in _this.formArray) {\n                        for (let j in resultdata) {\n                            if (_this.formArray[i].fieldName == j) {\n                                _this.formArray[i].vals = resultdata[j];\n                            }\n\n                        }\n                    };\n                    _this.limit = '';\n                }\n            } catch (error) {\n                console.error(error);\n            }\n        },\n        /**\n         * 格式化时间+1s\n        */\n        formatterTimes(time, sum) {\n            let date = time;\n            if (!date) {\n                return\n            }\n            date = date.substring(0, 19);\n            date = date.replace(/-/g, '/');\n            let timestamp = new Date(date).getTime();\n            if (sum == 0) {\n                timestamp = timestamp;\n            } else {\n                timestamp = timestamp += (sum * 1000);\n            }\n            var d = new Date(timestamp);\n            var dates = (d.getFullYear()) + \"-\" +\n                (d.getMonth() + 1 < 10 ? '0' + (d.getMonth() + 1) : d.getMonth() + 1) + \"-\" +\n                (d.getDate() < 10 ? '0' + d.getDate() : d.getDate()) + \" \" +\n                (d.getHours() < 10 ? '0' + d.getHours() : d.getHours()) + \":\" +\n                (d.getMinutes() < 10 ? '0' + d.getMinutes() : d.getMinutes()) + \":\" +\n                (d.getSeconds() < 10 ? '0' + d.getSeconds() : d.getSeconds());\n            return dates\n        },\n        /**\n         * 初始化Echarts，监听父容器大小自适应宽度、高度\n        */\n        drawLine() {\n            let _this = this;\n            this.myChart = this.$echarts.getInstanceByDom(document.getElementById(\"myChart\"));\n            if (this.myChart === undefined) {\n                this.myChart = this.$echarts.init(document.getElementById(\"myChart\"));\n            }\n            this.myChart.getZr().on('mousemove', params => {\n                var pointInPixel = [params.offsetX, params.offsetY];\n                if (this.myChart.containPixel('grid', pointInPixel)) {\n                    if (_this.isEnter == true) {\n                        return\n                    };\n                    window.clearInterval(_this.setInterval);\n                    window.clearInterval(_this.settimeouts);\n                    _this.settimeouts = setInterval(() => {\n                        _this.isEnter = false;\n                        _this.count++\n                        if (_this.count > 6) {\n                            window.clearInterval(_this.setInterval);\n                            window.clearInterval(_this.settimeouts);\n                            _this.setInterval = setInterval(() => {\n                                _this.getApparatusData({\n                                    thisTimes: _this.thisTimes,\n                                    limit: _this.limit\n                                })\n                                _this.count = 0\n                            }, 1000)\n                        }\n                    }, 1000)\n                }\n            })\n            this.myChart.getZr().on('mouseout', function (ev) {\n                _this.isEnter = false;\n                window.clearInterval(_this.setInterval);\n                window.clearInterval(_this.settimeouts);\n                _this.setInterval = setInterval(() => {\n                    _this.getApparatusData({\n                        thisTimes: _this.thisTimes,\n                        limit: _this.limit\n                    })\n                    _this.count = 0\n                }, 1000)\n            })\n\n            this.myChart.setOption(this.option, true);\n\n            let elementResizeDetectorMaker = require(\"element-resize-detector\");//引入监听dom变化的组件\n            let erd = elementResizeDetectorMaker();\n            let worldMapContainer = document.getElementById('apparatus');\n            erd.listenTo(worldMapContainer, function (element) {  //执行监听 \n                _this.$nextTick(function () {\n                    document.getElementById(\"myChart\").style.width = element.offsetWidth + 'px';\n                    _this.myChart.resize(); //变化重新渲染饼图\n                })\n            });\n            let apparatusContent = document.getElementsByClassName('apparatus-content')[0];\n            /**\n             * 监听任务内容框是否缩小\n             * */\n            erd.listenTo(apparatusContent, function (element) {  //执行监听 \n                _this.$nextTick(function () {\n                    document.getElementsByClassName('apparatus-from-content')[0].style.height = element.clientHeight + 'px';\n                    document.getElementsByClassName('grid-content')[0].style.height = element.clientHeight + 'px';\n                    document.getElementById('myChart').style.height = element.clientHeight + 'px';\n                    document.getElementById(\"myChart\").style.width = element.offsetWidth + 'px';\n                    _this.myChart.resize(); //变化重新渲染饼图\n                })\n            });\n        },\n        /**\n         * 获取ishow  初始化Echarts的option的yAxis与series\n         * */\n        async getishow() {\n            let _this = this;\n            let result = await request({\n                url: \"sys-define/get_ishow_define\",\n                method: \"get\"\n            });\n            try {\n                _this.formArray = JSON.parse(JSON.stringify(result.data));\n\n                if (_this.formArray.length > 0) {\n                    for (let i in _this.formArray) {\n                        if (_this.formArray[i].showInChart == 1) {\n                            _this.chartsArray.push(_this.formArray[i])\n                        }\n                    }\n                    for (let i in _this.chartsArray) {\n                        _this.option.series.push({\n                            id: _this.chartsArray[i].serialNo,\n                            name: _this.chartsArray[i].dataName,\n                            type: 'line3D',\n                            yAxisIndex: i,\n                            symbol: 'none',\n                            smooth: true,\n                            data: [],\n                            labelName: _this.chartsArray[i].fieldName,\n                            sameAs: _this.chartsArray[i].sameAs\n                        });\n                        _this.option.yAxis3D.push({\n                            id: _this.chartsArray[i].serialNo,\n                            name: _this.chartsArray[i].dataName,\n                            position: 'left',\n                            type: 'value',\n                            show: i == 0 ? true : false,\n                            inverse: _this.chartsArray[i].topLeft == 1 ? true : false,\n                            axisLine: { show: true },\n                            axisTick: { show: false },\n                            splitLine: { show: true },\n                            nameLocation: _this.chartsArray[i].topLeft == 1 ? 'start' : 'end',\n                            min: _this.chartsArray[i].lowerLimit == null ? 'dataMin' : _this.chartsArray[i].lowerLimit,\n                            max: _this.chartsArray[i].upperLimit == null ? 'dataMax' : _this.chartsArray[i].upperLimit,\n                        });\n                        _this.legendArray.push({\n                            color: '',\n                            name: _this.chartsArray[i].dataName + '(' + _this.chartsArray[i].dataUnit + ')',\n                            id: _this.chartsArray[i].serialNo,\n                            sameAs: _this.chartsArray[i].sameAs\n                        })\n\n                    }\n\n                    for (let i in _this.option.yAxis3D) {\n                        for (let j in _this.option.series) {\n                            if (_this.option.series[j].sameAs == _this.option.yAxis3D[i].id) {\n                                _this.option.series[j].yAxisIndex = i\n                            }\n                        }\n                    }\n                    for (let i in _this.colorArray) {\n                        for (let j in _this.legendArray) {\n                            _this.legendArray[j].color = _this.colorArray[j]\n                        }\n                    }\n\n                    _this.drawLine()\n                }\n\n\n            } catch (error) {\n                console.error(error);\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.apparatus-content {\n    height: 94%;\n}\n\n.bigScreen {\n    height: 100%;\n    position: relative;\n    display: flex;\n    justify-content: space-around;\n}\n.smellScreen {\n    height: 100%;\n    position: relative;\n    overflow-x: auto;\n}\n.smellScreen::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n}\n.from-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 0 20px;\n    margin-top: 96px;\n    z-index: 99;\n}\n.apparatus-from-content {\n    height: 100%;\n    overflow: hidden;\n    width: 15%;\n    border-left: 1px solid #eee;\n    position: relative;\n}\n.apparatus-from-content::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n}\n.apparatus-from-content-1 {\n    height: 100%;\n    overflow: auto;\n    width: 100%;\n    border-left: 1px solid #eee;\n}\n.apparatus-from-content-1::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n}\n\n.page-title {\n    height: 32px;\n    position: relative;\n    margin: 5px 10px;\n    line-height: 32px;\n    border-bottom: 1px solid #eee;\n    cursor: default;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    z-index: 1999;\n    padding-bottom: 5px;\n}\n.page-title .page-title-span {\n    font-size: 16px;\n    color: #409eff;\n}\n.page-title .close-btn {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n    cursor: pointer;\n    color: #303133;\n}\n.page-title .close-btn:hover {\n    color: #5cb6ff;\n}\n.grid-content {\n    padding: 0 20px;\n    z-index: 99;\n    position: relative;\n}\n.grid-content::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n}\n.from-content-1 {\n    margin-top: 85px;\n}\n.from-content-1 .el-form-item {\n    margin-bottom: 6px;\n}\n.myChart {\n    border-right: 1px solid #ccc;\n}\n.top-input {\n    cursor: default;\n    margin-bottom: 18px;\n    background: #fff;\n    position: absolute;\n    top: 0;\n    z-index: 100;\n    width: 100%;\n}\n.top-input p {\n    font-size: 14px;\n    color: #303133;\n    line-height: 40px;\n    box-sizing: border-box;\n    font-weight: 600;\n    margin: 0;\n}\n.top-input-1 {\n    width: 100%;\n    cursor: default;\n    background: #fff;\n    position: absolute;\n    top: 0;\n    z-index: 100;\n    padding: 0 20px;\n}\n.top-input-1 p {\n    font-size: 14px;\n    color: #303133;\n    line-height: 40px;\n    box-sizing: border-box;\n    font-weight: 600;\n    margin: 0;\n}\n.legend-item {\n    display: inline-block;\n    padding: 0 4px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.legend-item .legend-point {\n    display: inline-block;\n    height: 12px;\n    width: 12px;\n    background: #ccc;\n    border-radius: 50%;\n    position: relative;\n    margin: 0 5px 0 5px;\n    vertical-align: middle;\n    cursor: pointer;\n}\n.legend-point-line {\n    display: inline-block;\n    position: absolute;\n    width: 24px;\n    height: 1px;\n    top: 6px;\n    left: -6px;\n    background: #ccc;\n}\n.legend-item .legend-title {\n    font-size: 12px;\n    display: inline-block;\n    padding: 0 3px;\n    line-height: 24px;\n    cursor: pointer;\n}\n\n.form-label {\n    width: 100%;\n    cursor: default;\n    margin: 10px 0;\n}\n.form-label p {\n    margin: 0;\n    color: #303133;\n    font-size: 14px;\n    font-weight: 600;\n}\n.form-label .form-label-res {\n    display: inline-block;\n    border: 1px solid #dcdfe6;\n    color: #606266;\n    font-size: 14px;\n    padding: 4px 3px;\n    border-radius: 4px;\n    width: 100%;\n    max-width: 200px;\n    text-indent: 3px;\n    white-space: nowrap;\n}\n.form-label-top {\n    cursor: default;\n    margin: 10px 0;\n    padding: 0 20px;\n}\n.form-label-top p {\n    margin: 0;\n    color: #303133;\n    font-size: 14px;\n    font-weight: 600;\n}\n.form-label-top .form-label-res {\n    display: inline-block;\n    border: 1px solid #dcdfe6;\n    color: #606266;\n    font-size: 14px;\n    padding: 4px 3px;\n    border-radius: 4px;\n    width: 100%;\n    text-indent: 3px;\n}\n.contrlbtns {\n    display: inline-block;\n    margin-left: 20px;\n    z-index: 999;\n}\n.contrlbtns .contrlbtnsinput {\n    display: inline-block;\n    vertical-align: middle;\n    margin: 0 5px;\n    text-align: center;\n    font-size: 12px;\n}\n.refreshbtn {\n    display: inline-block;\n    margin-right: 10px;\n    vertical-align: middle;\n    cursor: pointer;\n}\n.tool-box {\n    display: inline-block;\n    margin-left: 20px;\n}\n</style>"]}]}